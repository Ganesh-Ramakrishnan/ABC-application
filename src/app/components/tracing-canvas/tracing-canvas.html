<div class="min-h-screen bg-gradient-to-b from-cyan-400 via-teal-500 to-green-600 p-2 md:p-4 relative overflow-hidden">
  <!-- Animated Background Elements -->

  <!-- Floating Clouds -->
  <div class="absolute top-4 left-8 text-5xl md:text-6xl opacity-70 animate-float">‚òÅÔ∏è</div>
  <div class="absolute top-12 right-12 text-4xl md:text-5xl opacity-60 animate-float" style="animation-delay: 1s;">‚òÅÔ∏è</div>
  <div class="absolute top-24 left-1/3 text-3xl md:text-4xl opacity-50 animate-float" style="animation-delay: 2s;">‚òÅÔ∏è</div>

  <!-- Twinkling Stars -->
  <div class="absolute top-8 right-1/4 text-2xl md:text-3xl animate-glow">‚≠ê</div>
  <div class="absolute top-20 left-16 text-xl md:text-2xl animate-sparkle" style="animation-delay: 0.5s;">‚ú®</div>
  <div class="absolute top-6 left-1/2 text-2xl md:text-3xl animate-glow" style="animation-delay: 1s;">‚≠ê</div>
  <div class="absolute top-16 right-8 text-xl md:text-2xl animate-sparkle" style="animation-delay: 1.5s;">‚ú®</div>

  <!-- Swaying Leaves -->
  <div class="absolute top-0 left-0 text-5xl md:text-6xl opacity-60 -rotate-45 animate-sway">üåø</div>
  <div class="absolute top-0 right-0 text-5xl md:text-6xl opacity-60 rotate-45 scale-x-[-1] animate-sway" style="animation-delay: 0.5s;">üåø</div>
  <div class="absolute top-32 left-2 text-3xl md:text-4xl opacity-50 animate-sway" style="animation-delay: 1s;">üçÉ</div>
  <div class="absolute top-28 right-4 text-3xl md:text-4xl opacity-50 animate-sway" style="animation-delay: 1.5s;">üçÉ</div>

  <!-- Animated Animals -->
  <div class="absolute top-20 right-2 md:right-4 text-4xl md:text-5xl hidden md:block animate-wiggle">ü¶ú</div>
  <div class="absolute top-40 left-2 md:left-4 text-3xl md:text-4xl hidden md:block animate-hop" style="animation-delay: 0.3s;">üêµ</div>

  <!-- Bottom Decorations -->
  <div class="absolute bottom-0 left-0 text-6xl md:text-7xl opacity-70">üå≥</div>
  <div class="absolute bottom-0 right-0 text-6xl md:text-7xl opacity-70">üå≥</div>
  <div class="absolute bottom-0 left-16 text-4xl md:text-5xl animate-bounce-soft">üå∫</div>
  <div class="absolute bottom-0 right-16 text-4xl md:text-5xl animate-bounce-soft" style="animation-delay: 0.3s;">üå∏</div>
  <div class="absolute bottom-2 left-1/4 text-3xl md:text-4xl animate-bounce-soft" style="animation-delay: 0.6s;">üåº</div>
  <div class="absolute bottom-2 right-1/4 text-3xl md:text-4xl animate-bounce-soft" style="animation-delay: 0.9s;">üå∑</div>

  <!-- Floating Butterflies -->
  <div class="absolute top-1/3 left-4 text-2xl md:text-3xl animate-flutter">ü¶ã</div>
  <div class="absolute top-1/2 right-6 text-2xl md:text-3xl animate-flutter" style="animation-delay: 1s;">ü¶ã</div>

  <div class="max-w-4xl mx-auto relative z-10">
    <!-- Header -->
    <div class="flex items-center justify-between mb-2">
      <button
        (click)="goBack()"
        class="w-10 h-10 md:w-14 md:h-14 bg-gradient-to-br from-red-400 to-red-600 rounded-full flex items-center justify-center shadow-lg border-4 border-white hover:scale-110 transition-transform animate-pop-in">
        <span class="text-white text-xl md:text-3xl font-bold">‚Üê</span>
      </button>

      <div class="text-center animate-pop-in" style="animation-delay: 0.1s;">
        <h1 class="text-2xl md:text-4xl font-kids tracking-wide">
          <ng-container *ngIf="isFreeWriting">
            <span class="title-letter text-blue-500 drop-shadow-lg">W</span>
            <span class="title-letter text-purple-500 drop-shadow-lg">r</span>
            <span class="title-letter text-pink-500 drop-shadow-lg">i</span>
            <span class="title-letter text-red-500 drop-shadow-lg">t</span>
            <span class="title-letter text-orange-500 drop-shadow-lg">e</span>
            <span class="text-white drop-shadow-lg">: </span>
            <span class="title-letter text-yellow-400 drop-shadow-lg animate-pulse">{{currentLetter}}</span>
          </ng-container>
          <ng-container *ngIf="!isFreeWriting">
            <span class="title-letter text-red-500 drop-shadow-lg">T</span>
            <span class="title-letter text-orange-500 drop-shadow-lg">r</span>
            <span class="title-letter text-yellow-400 drop-shadow-lg">a</span>
            <span class="title-letter text-green-500 drop-shadow-lg">c</span>
            <span class="title-letter text-blue-500 drop-shadow-lg">e</span>
            <span class="text-white drop-shadow-lg">: </span>
            <span class="title-letter text-purple-500 drop-shadow-lg animate-pulse">{{currentLetter}}</span>
          </ng-container>
        </h1>
      </div>

      <div class="w-10 h-10 md:w-14 md:h-14"></div>
    </div>

    <!-- Progress Bar with Rainbow Effect -->
    <div class="mb-2 max-w-4xl mx-auto animate-pop-in" style="animation-delay: 0.2s;">
      <div class="bg-white/90 backdrop-blur-sm rounded-full p-1.5 shadow-xl border-4 border-yellow-400">
        <div class="relative h-6 md:h-8 bg-gray-200 rounded-full overflow-hidden">
          <div
            class="absolute top-0 left-0 h-full bg-gradient-to-r from-green-400 via-emerald-500 to-green-600 transition-all duration-300 ease-out flex items-center justify-end pr-2 rounded-full"
            [style.width.%]="traceProgress">
            <span class="text-white font-bold text-sm md:text-base drop-shadow" *ngIf="traceProgress > 10">
              {{traceProgress}}%
            </span>
          </div>
          <!-- Star at the end of progress -->
          <div class="absolute top-1/2 -translate-y-1/2 text-lg md:text-xl transition-all duration-300" [style.left.%]="traceProgress > 5 ? traceProgress - 3 : 2">
            ‚≠ê
          </div>
        </div>
      </div>
    </div>

    <!-- Celebration Overlay with Multiple Elements -->
    <div *ngIf="showCelebration" class="fixed inset-0 pointer-events-none z-50 flex items-center justify-center">
      <div class="text-8xl md:text-9xl animate-bounce">üéâ</div>
      <div class="absolute top-1/4 left-1/4 text-5xl md:text-6xl animate-spin-slow">‚≠ê</div>
      <div class="absolute top-1/4 right-1/4 text-5xl md:text-6xl animate-spin-slow" style="animation-delay: 0.2s;">üåü</div>
      <div class="absolute bottom-1/4 left-1/3 text-4xl md:text-5xl animate-bounce" style="animation-delay: 0.3s;">üéä</div>
      <div class="absolute bottom-1/4 right-1/3 text-4xl md:text-5xl animate-bounce" style="animation-delay: 0.4s;">üéä</div>
      <div class="absolute top-1/3 left-1/2 text-6xl md:text-7xl animate-pulse">üèÜ</div>
    </div>

    <!-- SVG Tracing Canvas with Decorated Border -->
    <div class="bg-white rounded-3xl shadow-2xl p-2 md:p-4 border-4 border-yellow-400 animate-pop-in" style="animation-delay: 0.3s;">
      <div class="relative w-full" style="aspect-ratio: 1/1; max-width: 500px; margin: 0 auto;">

        <!-- WRITING MODE: Block letter reference + free drawing canvas -->
        <div *ngIf="isFreeWriting" class="relative w-full h-full" style="aspect-ratio: 1/1;">
          <!-- Block/Filled letter reference (faint background like the image) -->
          <svg
            viewBox="0 0 400 400"
            class="absolute top-0 left-0 w-full h-full"
            style="pointer-events: none; z-index: 1;">

            <!-- Solid filled letter with gray fill and darker gray outline -->
            <text
              x="200"
              y="310"
              font-size="340"
              font-family="Arial Black, Arial, sans-serif"
              font-weight="900"
              text-anchor="middle"
              fill="#E5E7EB"
              stroke="#9CA3AF"
              stroke-width="3">
              {{currentLetter}}
            </text>

            <!-- Decoration emoji -->
            <text x="320" y="90" font-size="50" id="letterDecorWriting">üçé</text>
          </svg>

          <!-- Drawing canvas for free writing (on top of letter) -->
          <canvas
            #drawingCanvas
            class="absolute top-0 left-0 w-full h-full"
            style="touch-action: none; pointer-events: auto; z-index: 2; background: transparent;">
          </canvas>
        </div>

        <!-- TRACING MODE: Mask reveal system -->
        <svg
          *ngIf="!isFreeWriting"
          #tracingSvg
          viewBox="0 0 400 400"
          class="w-full h-full"
          style="touch-action: none; user-select: none; overflow: hidden;">

          <!-- Definitions -->
          <defs>
            <!-- Clipping path to ensure everything stays within canvas -->
            <clipPath id="canvasClip">
              <rect x="0" y="0" width="400" height="400"/>
            </clipPath>

            <!-- Clipping path for letter A - ensures magenta never goes outside gray -->
            <clipPath id="letterAClip">
              <path d="M 110 280 L 190 60 L 210 60 L 140 280 Z"/>
              <path d="M 190 60 L 210 60 L 290 280 L 260 280 Z"/>
              <path d="M 145 180 L 255 180 L 255 200 L 145 200 Z"/>
            </clipPath>

            <!-- Clipping path for letter B - matches tracing strokes -->
            <!-- Vertical: y=55-345, Top bump: y=55-200, Bottom bump: y=200-345 (equal 50/50 split) -->
            <!-- Using Q curves for smooth rounded bumps like a proper B -->
            <clipPath id="letterBClip">
              <!-- Vertical stem: x=110 ¬±14 = 96-124, y=55-345 ¬±14 = 41-359 -->
              <path d="M 96 41 L 124 41 L 124 359 L 96 359 Z"/>
              <!-- Top bump with proper rounded curve -->
              <path d="M 110 41 L 200 41 Q 294 41 294 127.5 Q 294 214 200 214 L 110 214 L 110 186 L 200 186 Q 266 186 266 127.5 Q 266 69 200 69 L 110 69 Z"/>
              <!-- Bottom bump with proper rounded curve -->
              <path d="M 110 186 L 200 186 Q 294 186 294 272.5 Q 294 359 200 359 L 110 359 L 110 331 L 200 331 Q 266 331 266 272.5 Q 266 214 200 214 L 110 214 Z"/>
            </clipPath>

            <!-- Clipping path for letter C - proper C shape -->
            <!-- Tracing: starts at (280,100), curves through (200,55) at top, (80,200) at left, (200,345) at bottom, ends at (280,300) -->
            <clipPath id="letterCClip">
              <!-- C shape: outer arc then inner arc back, stroke width 28 (¬±14px) -->
              <path d="M 294 100 Q 294 41 200 41 Q 66 41 66 200 Q 66 359 200 359 Q 294 359 294 300 L 266 300 Q 266 331 200 331 Q 94 331 94 200 Q 94 69 200 69 Q 266 69 266 100 Z"/>
            </clipPath>

            <!-- Clipping path for letter D - vertical stem + curved bump -->
            <!-- Tracing: Vertical y=55-345 at x=100, Bump curves to x=300 -->
            <clipPath id="letterDClip">
              <!-- Vertical stem: x=100 ¬±14 = 86-114 -->
              <path d="M 86 41 L 114 41 L 114 359 L 86 359 Z"/>
              <!-- D bump: outer at x=314, inner at x=286 -->
              <path d="M 100 41 L 200 41 Q 314 41 314 200 Q 314 359 200 359 L 100 359 L 100 331 L 200 331 Q 286 331 286 200 Q 286 69 200 69 L 100 69 Z"/>
            </clipPath>

            <!-- Clipping path for letter E -->
            <clipPath id="letterEClip">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z"/>
              <path d="M 100 66 L 294 66 L 294 94 L 100 94 Z"/>
              <path d="M 100 186 L 274 186 L 274 214 L 100 214 Z"/>
              <path d="M 100 306 L 294 306 L 294 334 L 100 334 Z"/>
            </clipPath>

            <!-- Clipping path for letter F -->
            <clipPath id="letterFClip">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z"/>
              <path d="M 100 66 L 294 66 L 294 94 L 100 94 Z"/>
              <path d="M 100 186 L 274 186 L 274 214 L 100 214 Z"/>
            </clipPath>

            <!-- Clipping path for letter G -->
            <clipPath id="letterGClip">
              <path d="M 294 106 Q 246 66 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 294 334 294 254 L 294 186 L 206 186 L 206 214 L 266 214 L 266 254 Q 266 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Q 232 94 266 120 Z"/>
            </clipPath>

            <!-- Clipping path for letter H -->
            <clipPath id="letterHClip">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z"/>
              <path d="M 286 66 L 314 66 L 314 334 L 286 334 Z"/>
              <path d="M 86 186 L 314 186 L 314 214 L 86 214 Z"/>
            </clipPath>

            <!-- Clipping path for letter I -->
            <clipPath id="letterIClip">
              <path d="M 106 66 L 294 66 L 294 94 L 106 94 Z"/>
              <path d="M 186 66 L 214 66 L 214 334 L 186 334 Z"/>
              <path d="M 106 306 L 294 306 L 294 334 L 106 334 Z"/>
            </clipPath>

            <!-- Clipping path for letter J -->
            <clipPath id="letterJClip">
              <path d="M 106 66 L 294 66 L 294 94 L 106 94 Z"/>
              <path d="M 206 66 L 234 66 L 234 266 Q 234 334 180 334 Q 126 334 126 266 L 154 266 Q 154 306 180 306 Q 206 306 206 266 Z"/>
            </clipPath>

            <!-- Clipping path for letter K -->
            <clipPath id="letterKClip">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z"/>
              <path d="M 100 180 L 290 66 L 314 90 L 140 195 L 314 310 L 290 334 L 100 220 Z"/>
            </clipPath>

            <!-- Clipping path for letter L -->
            <clipPath id="letterLClip">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z"/>
              <path d="M 86 306 L 294 306 L 294 334 L 86 334 Z"/>
            </clipPath>

            <!-- Clipping path for letter M -->
            <clipPath id="letterMClip">
              <path d="M 66 306 L 94 306 L 94 94 L 66 94 Z"/>
              <path d="M 66 66 L 200 186 L 94 66 Z"/>
              <path d="M 200 186 L 306 66 L 334 66 Z"/>
              <path d="M 306 94 L 334 94 L 334 306 L 306 306 Z"/>
            </clipPath>

            <!-- Clipping path for letter N -->
            <clipPath id="letterNClip">
              <path d="M 86 306 L 114 306 L 114 94 L 86 94 Z"/>
              <path d="M 86 66 L 300 290 L 114 66 Z"/>
              <path d="M 286 306 L 314 306 L 314 110 L 300 94 L 286 110 Z"/>
            </clipPath>

            <!-- Clipping path for letter O -->
            <clipPath id="letterOClip">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z"/>
            </clipPath>

            <!-- Clipping path for letter P -->
            <clipPath id="letterPClip">
              <path d="M 86 306 L 114 306 L 114 66 L 86 66 Z"/>
              <path d="M 100 66 L 240 66 Q 314 66 314 146 Q 314 254 240 254 L 100 254 L 100 226 L 240 226 Q 286 226 286 146 Q 286 94 240 94 L 100 94 Z"/>
            </clipPath>

            <!-- Clipping path for letter Q -->
            <clipPath id="letterQClip">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z"/>
              <path d="M 226 266 L 334 374 L 314 394 L 206 286 Z"/>
            </clipPath>

            <!-- Clipping path for letter R -->
            <clipPath id="letterRClip">
              <path d="M 86 306 L 114 306 L 114 66 L 86 66 Z"/>
              <path d="M 100 66 L 240 66 Q 314 66 314 146 Q 314 254 240 254 L 100 254 L 100 226 L 240 226 Q 286 226 286 146 Q 286 94 240 94 L 100 94 Z"/>
              <path d="M 166 226 L 314 334 L 290 358 L 142 250 Z"/>
            </clipPath>

            <!-- Clipping path for letter S -->
            <clipPath id="letterSClip">
              <path d="M 294 106 Q 260 66 200 66 Q 86 66 86 126 Q 86 214 200 214 Q 314 214 314 274 Q 314 334 200 334 Q 140 334 106 294 L 126 274 Q 154 306 200 306 Q 286 306 286 274 Q 286 214 200 186 Q 114 186 114 126 Q 114 94 200 94 Q 246 94 274 126 Z"/>
            </clipPath>

            <!-- Clipping path for letter T -->
            <clipPath id="letterTClip">
              <path d="M 86 66 L 314 66 L 314 94 L 86 94 Z"/>
              <path d="M 186 66 L 214 66 L 214 334 L 186 334 Z"/>
            </clipPath>

            <!-- Clipping path for letter U -->
            <clipPath id="letterUClip">
              <path d="M 86 66 L 114 66 L 114 266 Q 114 334 200 334 Q 286 334 286 266 L 286 66 L 314 66 L 314 266 Q 314 362 200 362 Q 86 362 86 266 Z"/>
            </clipPath>

            <!-- Clipping path for letter V -->
            <clipPath id="letterVClip">
              <path d="M 66 66 L 200 306 L 334 66 L 306 66 L 200 270 L 94 66 Z"/>
            </clipPath>

            <!-- Clipping path for letter W -->
            <clipPath id="letterWClip">
              <path d="M 66 66 L 120 306 L 200 146 L 280 306 L 334 66 L 306 66 L 266 260 L 200 120 L 134 260 L 94 66 Z"/>
            </clipPath>

            <!-- Clipping path for letter X -->
            <clipPath id="letterXClip">
              <path d="M 86 66 L 200 186 L 314 66 L 340 90 L 220 200 L 340 310 L 314 334 L 200 214 L 86 334 L 60 310 L 180 200 L 60 90 Z"/>
            </clipPath>

            <!-- Clipping path for letter Y -->
            <clipPath id="letterYClip">
              <path d="M 86 66 L 200 186 L 314 66 L 340 90 L 214 200 L 214 334 L 186 334 L 186 200 L 60 90 Z"/>
            </clipPath>

            <!-- Clipping path for letter Z -->
            <clipPath id="letterZClip">
              <path d="M 86 66 L 314 66 L 314 94 L 134 306 L 314 306 L 314 334 L 86 334 L 86 306 L 266 94 L 86 94 Z"/>
            </clipPath>

            <!-- Clipping paths for numbers 0-9 -->
            <clipPath id="letter0Clip">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z"/>
            </clipPath>

            <clipPath id="letter1Clip">
              <path d="M 146 92 L 186 66 L 214 66 L 214 334 L 186 334 L 186 120 L 160 140 Z"/>
              <path d="M 126 306 L 274 306 L 274 334 L 126 334 Z"/>
            </clipPath>

            <clipPath id="letter2Clip">
              <path d="M 86 120 Q 86 66 200 66 Q 314 66 314 120 Q 314 180 220 220 L 100 320 L 314 320 L 314 334 L 86 334 L 86 306 L 200 206 Q 286 166 286 120 Q 286 94 200 94 Q 114 94 114 120 Z"/>
            </clipPath>

            <clipPath id="letter3Clip">
              <path d="M 86 100 Q 126 66 200 66 Q 314 66 314 130 Q 314 186 214 200 Q 314 214 314 270 Q 314 334 200 334 Q 126 334 86 300 L 106 272 Q 140 306 200 306 Q 286 306 286 270 Q 286 214 200 214 L 200 186 Q 286 186 286 130 Q 286 94 200 94 Q 140 94 106 128 Z"/>
            </clipPath>

            <clipPath id="letter4Clip">
              <path d="M 246 66 L 274 66 L 274 334 L 246 334 Z"/>
              <path d="M 260 66 L 86 240 L 86 268 L 246 94 Z"/>
              <path d="M 86 226 L 314 226 L 314 254 L 86 254 Z"/>
            </clipPath>

            <clipPath id="letter5Clip">
              <path d="M 106 66 L 294 66 L 294 94 L 134 94 L 134 156 Q 180 140 240 180 Q 314 230 250 310 Q 190 350 106 300 L 126 272 Q 180 310 226 280 Q 286 240 226 190 Q 180 156 134 184 L 106 184 Z"/>
            </clipPath>

            <clipPath id="letter6Clip">
              <path d="M 280 96 Q 240 66 180 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 260 Q 314 186 200 186 Q 114 186 114 230 L 114 186 Q 114 94 180 94 Q 220 94 252 124 Z M 200 214 Q 286 214 286 260 Q 286 306 200 306 Q 114 306 114 260 Q 114 214 200 214 Z"/>
            </clipPath>

            <clipPath id="letter7Clip">
              <path d="M 86 66 L 314 66 L 314 94 L 194 334 L 166 334 L 286 94 L 86 94 Z"/>
            </clipPath>

            <clipPath id="letter8Clip">
              <path d="M 200 200 Q 86 200 86 130 Q 86 66 200 66 Q 314 66 314 130 Q 314 200 200 200 M 200 172 Q 286 172 286 130 Q 286 94 200 94 Q 114 94 114 130 Q 114 172 200 172 Z"/>
              <path d="M 200 200 Q 86 200 86 270 Q 86 334 200 334 Q 314 334 314 270 Q 314 200 200 200 M 200 228 Q 286 228 286 270 Q 286 306 200 306 Q 114 306 114 270 Q 114 228 200 228 Z"/>
            </clipPath>

            <clipPath id="letter9Clip">
              <path d="M 120 304 Q 140 334 220 334 Q 314 334 314 200 Q 314 66 200 66 Q 86 66 86 130 Q 86 200 200 200 Q 286 200 286 170 L 286 200 Q 286 306 220 306 Q 160 306 140 276 Z M 200 172 Q 114 172 114 130 Q 114 94 200 94 Q 286 94 286 130 Q 286 172 200 172 Z"/>
            </clipPath>

            <!-- Clipping paths for lowercase letters a-z -->
            <clipPath id="letteraClip">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 L 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 160 Z"/>
              <path d="M 266 106 L 294 106 L 294 294 L 266 294 Z"/>
            </clipPath>

            <clipPath id="letterbClip">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z"/>
              <path d="M 120 146 Q 120 106 200 106 Q 294 106 294 200 Q 294 294 200 294 Q 106 294 106 226 L 134 226 Q 134 266 200 266 Q 266 266 266 200 Q 266 134 200 134 Q 134 134 134 174 Z"/>
            </clipPath>

            <clipPath id="lettercClip">
              <path d="M 294 146 Q 274 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 274 294 294 254 L 266 240 Q 254 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 246 134 266 160 Z"/>
            </clipPath>

            <clipPath id="letterdClip">
              <path d="M 266 46 L 294 46 L 294 294 L 266 294 Z"/>
              <path d="M 294 226 Q 294 294 200 294 Q 106 294 106 200 Q 106 106 200 106 Q 294 106 294 146 L 266 160 Q 266 134 200 134 Q 134 134 134 200 Q 134 266 200 266 Q 266 266 266 240 Z"/>
            </clipPath>

            <clipPath id="lettereClip">
              <path d="M 106 186 L 294 186 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 274 294 294 264 L 266 250 Q 254 266 200 266 Q 134 266 134 200 L 134 214 L 266 214 Q 266 134 200 134 Q 134 134 134 186 Z"/>
            </clipPath>

            <clipPath id="letterfClip">
              <path d="M 274 86 Q 274 46 200 46 Q 146 46 146 86 L 146 294 L 174 294 L 174 86 Q 174 74 200 74 Q 246 74 246 100 Z"/>
              <path d="M 106 146 L 234 146 L 234 174 L 106 174 Z"/>
            </clipPath>

            <clipPath id="lettergClip">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 L 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 160 Z"/>
              <path d="M 266 106 L 294 106 L 294 354 Q 294 394 200 394 Q 126 394 106 354 L 134 340 Q 146 366 200 366 Q 266 366 266 340 Z"/>
            </clipPath>

            <clipPath id="letterhClip">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z"/>
              <path d="M 120 166 Q 120 106 200 106 Q 294 106 294 166 L 294 294 L 266 294 L 266 166 Q 266 134 200 134 Q 134 134 134 194 Z"/>
            </clipPath>

            <clipPath id="letteriClip">
              <path d="M 186 106 L 214 106 L 214 294 L 186 294 Z"/>
            </clipPath>

            <clipPath id="letterjClip">
              <path d="M 206 106 L 234 106 L 234 354 Q 234 394 160 394 Q 106 394 106 354 L 134 340 Q 134 366 160 366 Q 206 366 206 340 Z"/>
            </clipPath>

            <clipPath id="letterkClip">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z"/>
              <path d="M 120 180 L 250 106 L 274 130 L 154 195 L 294 280 L 270 304 L 120 220 Z"/>
            </clipPath>

            <clipPath id="letterlClip">
              <path d="M 186 46 L 214 46 L 214 294 L 186 294 Z"/>
            </clipPath>

            <clipPath id="lettermClip">
              <path d="M 66 294 L 94 294 L 94 146 Q 94 106 140 106 Q 186 106 186 146 L 186 294 L 214 294 L 214 146 Q 214 106 260 106 Q 306 106 306 146 L 306 294 L 334 294 L 334 146 Q 334 78 260 78 Q 214 78 200 106 Q 186 78 140 78 Q 66 78 66 146 Z"/>
            </clipPath>

            <clipPath id="letternClip">
              <path d="M 106 294 L 134 294 L 134 146 L 106 146 Z"/>
              <path d="M 120 166 Q 120 106 200 106 Q 294 106 294 166 L 294 294 L 266 294 L 266 166 Q 266 134 200 134 Q 134 134 134 194 Z"/>
            </clipPath>

            <clipPath id="letteroClip">
              <path d="M 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 Q 294 106 200 106 M 200 134 Q 266 134 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Z"/>
            </clipPath>

            <clipPath id="letterpClip">
              <path d="M 106 106 L 134 106 L 134 374 L 106 374 Z"/>
              <path d="M 120 146 Q 120 106 200 106 Q 294 106 294 200 Q 294 294 200 294 Q 106 294 106 226 L 134 226 Q 134 266 200 266 Q 266 266 266 200 Q 266 134 200 134 Q 134 134 134 174 Z"/>
            </clipPath>

            <clipPath id="letterqClip">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 226 L 266 226 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 174 Z"/>
              <path d="M 266 106 L 294 106 L 294 374 L 266 374 Z"/>
            </clipPath>

            <clipPath id="letterrClip">
              <path d="M 126 294 L 154 294 L 154 146 L 126 146 Z"/>
              <path d="M 140 166 Q 140 106 220 106 Q 294 106 294 146 L 266 160 Q 266 134 220 134 Q 154 134 154 194 Z"/>
            </clipPath>

            <clipPath id="lettersClip">
              <path d="M 274 136 Q 254 106 200 106 Q 126 106 126 146 Q 126 186 200 186 Q 274 186 274 226 Q 274 294 200 294 Q 146 294 126 264 L 146 244 Q 166 266 200 266 Q 246 266 246 240 Q 246 214 200 200 Q 154 186 154 146 Q 154 134 200 134 Q 234 134 254 156 Z"/>
            </clipPath>

            <clipPath id="lettertClip">
              <path d="M 186 46 L 214 46 L 214 294 L 186 294 Z"/>
              <path d="M 126 106 L 274 106 L 274 134 L 126 134 Z"/>
            </clipPath>

            <clipPath id="letteruClip">
              <path d="M 106 106 L 134 106 L 134 206 Q 134 294 200 294 Q 266 294 266 206 L 266 106 L 294 106 L 294 206 Q 294 322 200 322 Q 106 322 106 206 Z"/>
            </clipPath>

            <clipPath id="lettervClip">
              <path d="M 86 106 L 200 294 L 314 106 L 286 106 L 200 258 L 114 106 Z"/>
            </clipPath>

            <clipPath id="letterwClip">
              <path d="M 66 106 L 140 294 L 200 166 L 260 294 L 334 106 L 306 106 L 252 252 L 200 136 L 148 252 L 94 106 Z"/>
            </clipPath>

            <clipPath id="letterxClip">
              <path d="M 106 106 L 200 200 L 294 106 L 320 130 L 220 214 L 320 298 L 294 322 L 200 228 L 106 322 L 80 298 L 180 214 L 80 130 Z"/>
            </clipPath>

            <clipPath id="letteryClip">
              <path d="M 106 106 L 200 206 L 294 106 L 320 130 L 214 248 L 154 374 L 126 360 L 180 248 L 80 130 Z"/>
            </clipPath>

            <clipPath id="letterzClip">
              <path d="M 106 106 L 294 106 L 294 134 L 154 266 L 294 266 L 294 294 L 106 294 L 106 266 L 246 134 L 106 134 Z"/>
            </clipPath>

            <!-- Mask for revealing the colored letter -->
            <mask id="traceMask">
              <rect width="400" height="400" fill="black"/>
              <!-- White areas will reveal the letter - precise width to match letter thickness -->
              <path id="maskPath" stroke="white" stroke-width="28" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </mask>

            <!-- Pattern for decorative stars/flowers -->
            <pattern id="decorPattern" x="0" y="0" width="50" height="50" patternUnits="userSpaceOnUse">
              <text x="10" y="20" font-size="20">‚≠ê</text>
              <text x="30" y="40" font-size="15">‚ú®</text>
            </pattern>

            <!-- Gradient for sliding cursor -->
            <radialGradient id="cursorGradient">
              <stop offset="0%" stop-color="#FEF3C7"/>
              <stop offset="100%" stop-color="#FCD34D"/>
            </radialGradient>
          </defs>

          <!-- All content clipped to canvas boundaries -->
          <g clip-path="url(#canvasClip)">

          <!-- Letter A using SVG paths (perfect control) -->
          <g *ngIf="currentLetter === 'A'" id="letterPaths">
            <!-- Gray outline paths (background) - NO STROKES, only fill -->
            <g id="grayLetterPaths">
              <!-- Left stroke of A -->
              <path d="M 110 280 L 190 60 L 210 60 L 140 280 Z" fill="#E5E7EB"/>
              <!-- Right stroke of A -->
              <path d="M 190 60 L 210 60 L 290 280 L 260 280 Z" fill="#E5E7EB"/>
              <!-- Crossbar of A -->
              <path d="M 145 180 L 255 180 L 255 200 L 145 200 Z" fill="#E5E7EB"/>
            </g>

            <!-- Colorful magenta paths (revealed by mask AND clipped to letter shape) -->
            <g mask="url(#traceMask)" clip-path="url(#letterAClip)">
              <!-- Left stroke of A -->
              <path d="M 110 280 L 190 60 L 210 60 L 140 280 Z" fill="#D946A6"/>
              <!-- Right stroke of A -->
              <path d="M 190 60 L 210 60 L 290 280 L 260 280 Z" fill="#D946A6"/>
              <!-- Crossbar of A -->
              <path d="M 145 180 L 255 180 L 255 200 L 145 200 Z" fill="#D946A6"/>

              <!-- Decorative stars -->
              <text x="150" y="150" font-size="30">‚≠ê</text>
              <text x="250" y="150" font-size="30">‚≠ê</text>
              <text x="200" y="230" font-size="30">‚≠ê</text>
            </g>
          </g>

          <!-- Letter B using SVG paths (perfect control) -->
          <!-- Tracing: Vertical y=55-345, Top bump y=55-200, Bottom bump y=200-345 (equal 50/50 split) -->
          <!-- Using Q curves for smooth rounded B shape -->
          <g *ngIf="currentLetter === 'B'" id="letterBPaths">
            <!-- Gray outline paths (background) - matches tracing strokes -->
            <g id="grayLetterBPaths">
              <!-- Vertical stem: x=110 ¬±14 = 96-124 -->
              <path d="M 96 41 L 124 41 L 124 359 L 96 359 Z" fill="#E5E7EB"/>
              <!-- Top bump with proper rounded curve -->
              <path d="M 110 41 L 200 41 Q 294 41 294 127.5 Q 294 214 200 214 L 110 214 L 110 186 L 200 186 Q 266 186 266 127.5 Q 266 69 200 69 L 110 69 Z" fill="#E5E7EB"/>
              <!-- Bottom bump with proper rounded curve -->
              <path d="M 110 186 L 200 186 Q 294 186 294 272.5 Q 294 359 200 359 L 110 359 L 110 331 L 200 331 Q 266 331 266 272.5 Q 266 214 200 214 L 110 214 Z" fill="#E5E7EB"/>
            </g>

            <!-- Colorful magenta paths (revealed by mask AND clipped to letter shape) -->
            <g mask="url(#traceMask)" clip-path="url(#letterBClip)">
              <!-- Vertical stem -->
              <path d="M 96 41 L 124 41 L 124 359 L 96 359 Z" fill="#D946A6"/>
              <!-- Top bump with proper rounded curve -->
              <path d="M 110 41 L 200 41 Q 294 41 294 127.5 Q 294 214 200 214 L 110 214 L 110 186 L 200 186 Q 266 186 266 127.5 Q 266 69 200 69 L 110 69 Z" fill="#D946A6"/>
              <!-- Bottom bump with proper rounded curve -->
              <path d="M 110 186 L 200 186 Q 294 186 294 272.5 Q 294 359 200 359 L 110 359 L 110 331 L 200 331 Q 266 331 266 272.5 Q 266 214 200 214 L 110 214 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter C using SVG paths (perfect control) -->
          <!-- Tracing: starts at (280,100), curves to top (200,55), left (80,200), bottom (200,345), ends at (280,300) -->
          <g *ngIf="currentLetter === 'C'" id="letterCPaths">
            <!-- Gray outline paths (background) - proper C shape -->
            <g id="grayLetterCPaths">
              <!-- C shape: outer arc (294px from center) then inner arc (266px from center) back -->
              <path d="M 294 100 Q 294 41 200 41 Q 66 41 66 200 Q 66 359 200 359 Q 294 359 294 300 L 266 300 Q 266 331 200 331 Q 94 331 94 200 Q 94 69 200 69 Q 266 69 266 100 Z" fill="#E5E7EB"/>
            </g>

            <!-- Colorful magenta paths (revealed by mask AND clipped to letter shape) -->
            <g mask="url(#traceMask)" clip-path="url(#letterCClip)">
              <!-- C shape: same path as gray -->
              <path d="M 294 100 Q 294 41 200 41 Q 66 41 66 200 Q 66 359 200 359 Q 294 359 294 300 L 266 300 Q 266 331 200 331 Q 94 331 94 200 Q 94 69 200 69 Q 266 69 266 100 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter D using SVG paths -->
          <!-- Tracing: Vertical y=55-345 at x=100, Bump from (100,55) curves right to x=300 and back -->
          <g *ngIf="currentLetter === 'D'" id="letterDPaths">
            <!-- Gray outline paths (background) -->
            <g id="grayLetterDPaths">
              <!-- Vertical stem: x=100 ¬±14 = 86-114 -->
              <path d="M 86 41 L 114 41 L 114 359 L 86 359 Z" fill="#E5E7EB"/>
              <!-- D bump: outer at x=314, inner at x=286 -->
              <path d="M 100 41 L 200 41 Q 314 41 314 200 Q 314 359 200 359 L 100 359 L 100 331 L 200 331 Q 286 331 286 200 Q 286 69 200 69 L 100 69 Z" fill="#E5E7EB"/>
            </g>

            <!-- Colorful magenta paths (revealed by mask AND clipped to letter shape) -->
            <g mask="url(#traceMask)" clip-path="url(#letterDClip)">
              <!-- Vertical stem -->
              <path d="M 86 41 L 114 41 L 114 359 L 86 359 Z" fill="#D946A6"/>
              <!-- D bump -->
              <path d="M 100 41 L 200 41 Q 314 41 314 200 Q 314 359 200 359 L 100 359 L 100 331 L 200 331 Q 286 331 286 200 Q 286 69 200 69 L 100 69 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter E -->
          <g *ngIf="currentLetter === 'E'" id="letterEPaths">
            <g id="grayLetterEPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 100 66 L 294 66 L 294 94 L 100 94 Z" fill="#E5E7EB"/>
              <path d="M 100 186 L 274 186 L 274 214 L 100 214 Z" fill="#E5E7EB"/>
              <path d="M 100 306 L 294 306 L 294 334 L 100 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterEClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 100 66 L 294 66 L 294 94 L 100 94 Z" fill="#D946A6"/>
              <path d="M 100 186 L 274 186 L 274 214 L 100 214 Z" fill="#D946A6"/>
              <path d="M 100 306 L 294 306 L 294 334 L 100 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter F -->
          <g *ngIf="currentLetter === 'F'" id="letterFPaths">
            <g id="grayLetterFPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 100 66 L 294 66 L 294 94 L 100 94 Z" fill="#E5E7EB"/>
              <path d="M 100 186 L 274 186 L 274 214 L 100 214 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterFClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 100 66 L 294 66 L 294 94 L 100 94 Z" fill="#D946A6"/>
              <path d="M 100 186 L 274 186 L 274 214 L 100 214 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter G -->
          <g *ngIf="currentLetter === 'G'" id="letterGPaths">
            <g id="grayLetterGPaths">
              <path d="M 294 106 Q 246 66 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 294 334 294 254 L 294 186 L 206 186 L 206 214 L 266 214 L 266 254 Q 266 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Q 232 94 266 120 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterGClip)">
              <path d="M 294 106 Q 246 66 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 294 334 294 254 L 294 186 L 206 186 L 206 214 L 266 214 L 266 254 Q 266 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Q 232 94 266 120 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter H -->
          <g *ngIf="currentLetter === 'H'" id="letterHPaths">
            <g id="grayLetterHPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 286 66 L 314 66 L 314 334 L 286 334 Z" fill="#E5E7EB"/>
              <path d="M 86 186 L 314 186 L 314 214 L 86 214 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterHClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 286 66 L 314 66 L 314 334 L 286 334 Z" fill="#D946A6"/>
              <path d="M 86 186 L 314 186 L 314 214 L 86 214 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter I -->
          <g *ngIf="currentLetter === 'I'" id="letterIPaths">
            <g id="grayLetterIPaths">
              <path d="M 106 66 L 294 66 L 294 94 L 106 94 Z" fill="#E5E7EB"/>
              <path d="M 186 66 L 214 66 L 214 334 L 186 334 Z" fill="#E5E7EB"/>
              <path d="M 106 306 L 294 306 L 294 334 L 106 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterIClip)">
              <path d="M 106 66 L 294 66 L 294 94 L 106 94 Z" fill="#D946A6"/>
              <path d="M 186 66 L 214 66 L 214 334 L 186 334 Z" fill="#D946A6"/>
              <path d="M 106 306 L 294 306 L 294 334 L 106 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter J -->
          <g *ngIf="currentLetter === 'J'" id="letterJPaths">
            <g id="grayLetterJPaths">
              <path d="M 106 66 L 294 66 L 294 94 L 106 94 Z" fill="#E5E7EB"/>
              <path d="M 206 66 L 234 66 L 234 266 Q 234 334 180 334 Q 126 334 126 266 L 154 266 Q 154 306 180 306 Q 206 306 206 266 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterJClip)">
              <path d="M 106 66 L 294 66 L 294 94 L 106 94 Z" fill="#D946A6"/>
              <path d="M 206 66 L 234 66 L 234 266 Q 234 334 180 334 Q 126 334 126 266 L 154 266 Q 154 306 180 306 Q 206 306 206 266 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter K -->
          <g *ngIf="currentLetter === 'K'" id="letterKPaths">
            <g id="grayLetterKPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 100 180 L 290 66 L 314 90 L 140 195 L 314 310 L 290 334 L 100 220 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterKClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 100 180 L 290 66 L 314 90 L 140 195 L 314 310 L 290 334 L 100 220 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter L -->
          <g *ngIf="currentLetter === 'L'" id="letterLPaths">
            <g id="grayLetterLPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 86 306 L 294 306 L 294 334 L 86 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterLClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 86 306 L 294 306 L 294 334 L 86 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter M -->
          <g *ngIf="currentLetter === 'M'" id="letterMPaths">
            <g id="grayLetterMPaths">
              <path d="M 66 66 L 94 66 L 94 334 L 66 334 Z" fill="#E5E7EB"/>
              <path d="M 66 66 L 94 66 L 200 186 L 306 66 L 334 66 L 214 200 L 186 200 Z" fill="#E5E7EB"/>
              <path d="M 306 66 L 334 66 L 334 334 L 306 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterMClip)">
              <path d="M 66 66 L 94 66 L 94 334 L 66 334 Z" fill="#D946A6"/>
              <path d="M 66 66 L 94 66 L 200 186 L 306 66 L 334 66 L 214 200 L 186 200 Z" fill="#D946A6"/>
              <path d="M 306 66 L 334 66 L 334 334 L 306 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter N -->
          <g *ngIf="currentLetter === 'N'" id="letterNPaths">
            <g id="grayLetterNPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 86 66 L 114 66 L 300 290 L 314 290 L 314 334 L 286 334 L 100 110 L 86 110 Z" fill="#E5E7EB"/>
              <path d="M 286 66 L 314 66 L 314 334 L 286 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterNClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 86 66 L 114 66 L 300 290 L 314 290 L 314 334 L 286 334 L 100 110 L 86 110 Z" fill="#D946A6"/>
              <path d="M 286 66 L 314 66 L 314 334 L 286 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter O -->
          <g *ngIf="currentLetter === 'O'" id="letterOPaths">
            <g id="grayLetterOPaths">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z" fill="#E5E7EB" fill-rule="evenodd"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterOClip)">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z" fill="#D946A6" fill-rule="evenodd"/>
            </g>
          </g>

          <!-- Letter P -->
          <g *ngIf="currentLetter === 'P'" id="letterPPaths">
            <g id="grayLetterPPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 100 66 L 240 66 Q 314 66 314 146 Q 314 254 240 254 L 100 254 L 100 226 L 240 226 Q 286 226 286 146 Q 286 94 240 94 L 100 94 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterPClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 100 66 L 240 66 Q 314 66 314 146 Q 314 254 240 254 L 100 254 L 100 226 L 240 226 Q 286 226 286 146 Q 286 94 240 94 L 100 94 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter Q -->
          <g *ngIf="currentLetter === 'Q'" id="letterQPaths">
            <g id="grayLetterQPaths">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z" fill="#E5E7EB" fill-rule="evenodd"/>
              <path d="M 226 266 L 334 374 L 314 394 L 206 286 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterQClip)">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z" fill="#D946A6" fill-rule="evenodd"/>
              <path d="M 226 266 L 334 374 L 314 394 L 206 286 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter R -->
          <g *ngIf="currentLetter === 'R'" id="letterRPaths">
            <g id="grayLetterRPaths">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#E5E7EB"/>
              <path d="M 100 66 L 240 66 Q 314 66 314 146 Q 314 254 240 254 L 100 254 L 100 226 L 240 226 Q 286 226 286 146 Q 286 94 240 94 L 100 94 Z" fill="#E5E7EB"/>
              <path d="M 166 226 L 314 334 L 290 358 L 142 250 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterRClip)">
              <path d="M 86 66 L 114 66 L 114 334 L 86 334 Z" fill="#D946A6"/>
              <path d="M 100 66 L 240 66 Q 314 66 314 146 Q 314 254 240 254 L 100 254 L 100 226 L 240 226 Q 286 226 286 146 Q 286 94 240 94 L 100 94 Z" fill="#D946A6"/>
              <path d="M 166 226 L 314 334 L 290 358 L 142 250 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter S -->
          <g *ngIf="currentLetter === 'S'" id="letterSPaths">
            <g id="grayLetterSPaths">
              <path d="M 294 106 Q 260 66 200 66 Q 86 66 86 126 Q 86 214 200 214 Q 314 214 314 274 Q 314 334 200 334 Q 140 334 106 294 L 126 274 Q 154 306 200 306 Q 286 306 286 274 Q 286 214 200 186 Q 114 186 114 126 Q 114 94 200 94 Q 246 94 274 126 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterSClip)">
              <path d="M 294 106 Q 260 66 200 66 Q 86 66 86 126 Q 86 214 200 214 Q 314 214 314 274 Q 314 334 200 334 Q 140 334 106 294 L 126 274 Q 154 306 200 306 Q 286 306 286 274 Q 286 214 200 186 Q 114 186 114 126 Q 114 94 200 94 Q 246 94 274 126 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter T -->
          <g *ngIf="currentLetter === 'T'" id="letterTPaths">
            <g id="grayLetterTPaths">
              <path d="M 86 66 L 314 66 L 314 94 L 86 94 Z" fill="#E5E7EB"/>
              <path d="M 186 66 L 214 66 L 214 334 L 186 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterTClip)">
              <path d="M 86 66 L 314 66 L 314 94 L 86 94 Z" fill="#D946A6"/>
              <path d="M 186 66 L 214 66 L 214 334 L 186 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter U -->
          <g *ngIf="currentLetter === 'U'" id="letterUPaths">
            <g id="grayLetterUPaths">
              <path d="M 86 66 L 114 66 L 114 266 Q 114 334 200 334 Q 286 334 286 266 L 286 66 L 314 66 L 314 266 Q 314 362 200 362 Q 86 362 86 266 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterUClip)">
              <path d="M 86 66 L 114 66 L 114 266 Q 114 334 200 334 Q 286 334 286 266 L 286 66 L 314 66 L 314 266 Q 314 362 200 362 Q 86 362 86 266 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter V -->
          <g *ngIf="currentLetter === 'V'" id="letterVPaths">
            <g id="grayLetterVPaths">
              <path d="M 66 66 L 200 334 L 334 66 L 306 66 L 200 290 L 94 66 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterVClip)">
              <path d="M 66 66 L 200 334 L 334 66 L 306 66 L 200 290 L 94 66 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter W -->
          <g *ngIf="currentLetter === 'W'" id="letterWPaths">
            <g id="grayLetterWPaths">
              <path d="M 50 66 L 120 334 L 200 160 L 280 334 L 350 66 L 322 66 L 266 280 L 200 130 L 134 280 L 78 66 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterWClip)">
              <path d="M 50 66 L 120 334 L 200 160 L 280 334 L 350 66 L 322 66 L 266 280 L 200 130 L 134 280 L 78 66 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter X -->
          <g *ngIf="currentLetter === 'X'" id="letterXPaths">
            <g id="grayLetterXPaths">
              <path d="M 86 66 L 200 186 L 314 66 L 340 90 L 220 200 L 340 310 L 314 334 L 200 214 L 86 334 L 60 310 L 180 200 L 60 90 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterXClip)">
              <path d="M 86 66 L 200 186 L 314 66 L 340 90 L 220 200 L 340 310 L 314 334 L 200 214 L 86 334 L 60 310 L 180 200 L 60 90 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter Y -->
          <g *ngIf="currentLetter === 'Y'" id="letterYPaths">
            <g id="grayLetterYPaths">
              <path d="M 86 66 L 200 186 L 314 66 L 340 90 L 214 214 L 214 334 L 186 334 L 186 214 L 60 90 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterYClip)">
              <path d="M 86 66 L 200 186 L 314 66 L 340 90 L 214 214 L 214 334 L 186 334 L 186 214 L 60 90 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Letter Z -->
          <g *ngIf="currentLetter === 'Z'" id="letterZPaths">
            <g id="grayLetterZPaths">
              <path d="M 86 66 L 314 66 L 314 94 L 134 306 L 314 306 L 314 334 L 86 334 L 86 306 L 266 94 L 86 94 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterZClip)">
              <path d="M 86 66 L 314 66 L 314 94 L 134 306 L 314 306 L 314 334 L 86 334 L 86 306 L 266 94 L 86 94 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 0 -->
          <g *ngIf="currentLetter === '0'" id="letter0Paths">
            <g id="grayLetter0Paths">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z" fill="#E5E7EB" fill-rule="evenodd"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter0Clip)">
              <path d="M 200 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 200 Q 314 66 200 66 M 200 94 Q 286 94 286 200 Q 286 306 200 306 Q 114 306 114 200 Q 114 94 200 94 Z" fill="#D946A6" fill-rule="evenodd"/>
            </g>
          </g>

          <!-- Number 1 -->
          <g *ngIf="currentLetter === '1'" id="letter1Paths">
            <g id="grayLetter1Paths">
              <!-- Diagonal top -->
              <path d="M 146 92 L 186 66 L 214 66 L 214 334 L 186 334 L 186 120 L 160 140 Z" fill="#E5E7EB"/>
              <!-- Bottom bar -->
              <path d="M 126 306 L 274 306 L 274 334 L 126 334 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter1Clip)">
              <path d="M 146 92 L 186 66 L 214 66 L 214 334 L 186 334 L 186 120 L 160 140 Z" fill="#D946A6"/>
              <path d="M 126 306 L 274 306 L 274 334 L 126 334 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 2 -->
          <g *ngIf="currentLetter === '2'" id="letter2Paths">
            <g id="grayLetter2Paths">
              <path d="M 86 120 Q 86 66 200 66 Q 314 66 314 120 Q 314 180 220 220 L 100 320 L 314 320 L 314 334 L 86 334 L 86 306 L 200 206 Q 286 166 286 120 Q 286 94 200 94 Q 114 94 114 120 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter2Clip)">
              <path d="M 86 120 Q 86 66 200 66 Q 314 66 314 120 Q 314 180 220 220 L 100 320 L 314 320 L 314 334 L 86 334 L 86 306 L 200 206 Q 286 166 286 120 Q 286 94 200 94 Q 114 94 114 120 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 3 -->
          <g *ngIf="currentLetter === '3'" id="letter3Paths">
            <g id="grayLetter3Paths">
              <path d="M 86 100 Q 126 66 200 66 Q 314 66 314 130 Q 314 186 214 200 Q 314 214 314 270 Q 314 334 200 334 Q 126 334 86 300 L 106 272 Q 140 306 200 306 Q 286 306 286 270 Q 286 214 200 214 L 200 186 Q 286 186 286 130 Q 286 94 200 94 Q 140 94 106 128 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter3Clip)">
              <path d="M 86 100 Q 126 66 200 66 Q 314 66 314 130 Q 314 186 214 200 Q 314 214 314 270 Q 314 334 200 334 Q 126 334 86 300 L 106 272 Q 140 306 200 306 Q 286 306 286 270 Q 286 214 200 214 L 200 186 Q 286 186 286 130 Q 286 94 200 94 Q 140 94 106 128 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 4 -->
          <g *ngIf="currentLetter === '4'" id="letter4Paths">
            <g id="grayLetter4Paths">
              <!-- Vertical stem -->
              <path d="M 246 66 L 274 66 L 274 334 L 246 334 Z" fill="#E5E7EB"/>
              <!-- Diagonal part -->
              <path d="M 260 66 L 86 240 L 86 268 L 246 94 Z" fill="#E5E7EB"/>
              <!-- Horizontal bar -->
              <path d="M 86 226 L 314 226 L 314 254 L 86 254 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter4Clip)">
              <path d="M 246 66 L 274 66 L 274 334 L 246 334 Z" fill="#D946A6"/>
              <path d="M 260 66 L 86 240 L 86 268 L 246 94 Z" fill="#D946A6"/>
              <path d="M 86 226 L 314 226 L 314 254 L 86 254 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 5 -->
          <g *ngIf="currentLetter === '5'" id="letter5Paths">
            <g id="grayLetter5Paths">
              <!-- Top horizontal bar -->
              <path d="M 106 66 L 294 66 L 294 94 L 134 94 L 134 156 Q 180 140 240 180 Q 314 230 250 310 Q 190 350 106 300 L 126 272 Q 180 310 226 280 Q 286 240 226 190 Q 180 156 134 184 L 106 184 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter5Clip)">
              <path d="M 106 66 L 294 66 L 294 94 L 134 94 L 134 156 Q 180 140 240 180 Q 314 230 250 310 Q 190 350 106 300 L 126 272 Q 180 310 226 280 Q 286 240 226 190 Q 180 156 134 184 L 106 184 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 6 -->
          <g *ngIf="currentLetter === '6'" id="letter6Paths">
            <g id="grayLetter6Paths">
              <path d="M 280 96 Q 240 66 180 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 260 Q 314 186 200 186 Q 114 186 114 230 L 114 186 Q 114 94 180 94 Q 220 94 252 124 Z M 200 214 Q 286 214 286 260 Q 286 306 200 306 Q 114 306 114 260 Q 114 214 200 214 Z" fill="#E5E7EB" fill-rule="evenodd"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter6Clip)">
              <path d="M 280 96 Q 240 66 180 66 Q 86 66 86 200 Q 86 334 200 334 Q 314 334 314 260 Q 314 186 200 186 Q 114 186 114 230 L 114 186 Q 114 94 180 94 Q 220 94 252 124 Z M 200 214 Q 286 214 286 260 Q 286 306 200 306 Q 114 306 114 260 Q 114 214 200 214 Z" fill="#D946A6" fill-rule="evenodd"/>
            </g>
          </g>

          <!-- Number 7 -->
          <g *ngIf="currentLetter === '7'" id="letter7Paths">
            <g id="grayLetter7Paths">
              <path d="M 86 66 L 314 66 L 314 94 L 194 334 L 166 334 L 286 94 L 86 94 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter7Clip)">
              <path d="M 86 66 L 314 66 L 314 94 L 194 334 L 166 334 L 286 94 L 86 94 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Number 8 -->
          <g *ngIf="currentLetter === '8'" id="letter8Paths">
            <g id="grayLetter8Paths">
              <!-- Top loop -->
              <path d="M 200 200 Q 86 200 86 130 Q 86 66 200 66 Q 314 66 314 130 Q 314 200 200 200 M 200 172 Q 286 172 286 130 Q 286 94 200 94 Q 114 94 114 130 Q 114 172 200 172 Z" fill="#E5E7EB" fill-rule="evenodd"/>
              <!-- Bottom loop -->
              <path d="M 200 200 Q 86 200 86 270 Q 86 334 200 334 Q 314 334 314 270 Q 314 200 200 200 M 200 228 Q 286 228 286 270 Q 286 306 200 306 Q 114 306 114 270 Q 114 228 200 228 Z" fill="#E5E7EB" fill-rule="evenodd"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter8Clip)">
              <path d="M 200 200 Q 86 200 86 130 Q 86 66 200 66 Q 314 66 314 130 Q 314 200 200 200 M 200 172 Q 286 172 286 130 Q 286 94 200 94 Q 114 94 114 130 Q 114 172 200 172 Z" fill="#D946A6" fill-rule="evenodd"/>
              <path d="M 200 200 Q 86 200 86 270 Q 86 334 200 334 Q 314 334 314 270 Q 314 200 200 200 M 200 228 Q 286 228 286 270 Q 286 306 200 306 Q 114 306 114 270 Q 114 228 200 228 Z" fill="#D946A6" fill-rule="evenodd"/>
            </g>
          </g>

          <!-- Number 9 -->
          <g *ngIf="currentLetter === '9'" id="letter9Paths">
            <g id="grayLetter9Paths">
              <path d="M 120 304 Q 140 334 220 334 Q 314 334 314 200 Q 314 66 200 66 Q 86 66 86 130 Q 86 200 200 200 Q 286 200 286 170 L 286 200 Q 286 306 220 306 Q 160 306 140 276 Z M 200 172 Q 114 172 114 130 Q 114 94 200 94 Q 286 94 286 130 Q 286 172 200 172 Z" fill="#E5E7EB" fill-rule="evenodd"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letter9Clip)">
              <path d="M 120 304 Q 140 334 220 334 Q 314 334 314 200 Q 314 66 200 66 Q 86 66 86 130 Q 86 200 200 200 Q 286 200 286 170 L 286 200 Q 286 306 220 306 Q 160 306 140 276 Z M 200 172 Q 114 172 114 130 Q 114 94 200 94 Q 286 94 286 130 Q 286 172 200 172 Z" fill="#D946A6" fill-rule="evenodd"/>
            </g>
          </g>

          <!-- Lowercase letter a -->
          <g *ngIf="currentLetter === 'a'" id="letteraPaths">
            <g id="grayLetteraPaths">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 L 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 160 Z" fill="#E5E7EB"/>
              <path d="M 266 106 L 294 106 L 294 294 L 266 294 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letteraClip)">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 L 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 160 Z" fill="#D946A6"/>
              <path d="M 266 106 L 294 106 L 294 294 L 266 294 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter b -->
          <g *ngIf="currentLetter === 'b'" id="letterbPaths">
            <g id="grayLetterbPaths">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z" fill="#E5E7EB"/>
              <path d="M 120 146 Q 120 106 200 106 Q 294 106 294 200 Q 294 294 200 294 Q 106 294 106 226 L 134 226 Q 134 266 200 266 Q 266 266 266 200 Q 266 134 200 134 Q 134 134 134 174 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterbClip)">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z" fill="#D946A6"/>
              <path d="M 120 146 Q 120 106 200 106 Q 294 106 294 200 Q 294 294 200 294 Q 106 294 106 226 L 134 226 Q 134 266 200 266 Q 266 266 266 200 Q 266 134 200 134 Q 134 134 134 174 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter c -->
          <g *ngIf="currentLetter === 'c'" id="lettercPaths">
            <g id="grayLettercPaths">
              <path d="M 294 146 Q 274 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 274 294 294 254 L 266 240 Q 254 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 246 134 266 160 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettercClip)">
              <path d="M 294 146 Q 274 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 274 294 294 254 L 266 240 Q 254 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 246 134 266 160 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter d -->
          <g *ngIf="currentLetter === 'd'" id="letterdPaths">
            <g id="grayLetterdPaths">
              <path d="M 266 46 L 294 46 L 294 294 L 266 294 Z" fill="#E5E7EB"/>
              <path d="M 294 226 Q 294 294 200 294 Q 106 294 106 200 Q 106 106 200 106 Q 294 106 294 146 L 266 160 Q 266 134 200 134 Q 134 134 134 200 Q 134 266 200 266 Q 266 266 266 240 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterdClip)">
              <path d="M 266 46 L 294 46 L 294 294 L 266 294 Z" fill="#D946A6"/>
              <path d="M 294 226 Q 294 294 200 294 Q 106 294 106 200 Q 106 106 200 106 Q 294 106 294 146 L 266 160 Q 266 134 200 134 Q 134 134 134 200 Q 134 266 200 266 Q 266 266 266 240 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter e -->
          <g *ngIf="currentLetter === 'e'" id="letterePaths">
            <g id="grayLetterePaths">
              <path d="M 106 186 L 294 186 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 274 294 294 264 L 266 250 Q 254 266 200 266 Q 134 266 134 200 L 134 214 L 266 214 Q 266 134 200 134 Q 134 134 134 186 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettereClip)">
              <path d="M 106 186 L 294 186 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 274 294 294 264 L 266 250 Q 254 266 200 266 Q 134 266 134 200 L 134 214 L 266 214 Q 266 134 200 134 Q 134 134 134 186 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter f -->
          <g *ngIf="currentLetter === 'f'" id="letterfPaths">
            <g id="grayLetterfPaths">
              <path d="M 274 86 Q 274 46 200 46 Q 146 46 146 86 L 146 294 L 174 294 L 174 86 Q 174 74 200 74 Q 246 74 246 100 Z" fill="#E5E7EB"/>
              <path d="M 106 146 L 234 146 L 234 174 L 106 174 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterfClip)">
              <path d="M 274 86 Q 274 46 200 46 Q 146 46 146 86 L 146 294 L 174 294 L 174 86 Q 174 74 200 74 Q 246 74 246 100 Z" fill="#D946A6"/>
              <path d="M 106 146 L 234 146 L 234 174 L 106 174 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter g -->
          <g *ngIf="currentLetter === 'g'" id="lettergPaths">
            <g id="grayLettergPaths">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 L 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 160 Z" fill="#E5E7EB"/>
              <path d="M 266 106 L 294 106 L 294 354 Q 294 394 200 394 Q 126 394 106 354 L 134 340 Q 146 366 200 366 Q 266 366 266 340 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettergClip)">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 L 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 160 Z" fill="#D946A6"/>
              <path d="M 266 106 L 294 106 L 294 354 Q 294 394 200 394 Q 126 394 106 354 L 134 340 Q 146 366 200 366 Q 266 366 266 340 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter h -->
          <g *ngIf="currentLetter === 'h'" id="letterhPaths">
            <g id="grayLetterhPaths">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z" fill="#E5E7EB"/>
              <path d="M 120 166 Q 120 106 200 106 Q 294 106 294 166 L 294 294 L 266 294 L 266 166 Q 266 134 200 134 Q 134 134 134 194 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterhClip)">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z" fill="#D946A6"/>
              <path d="M 120 166 Q 120 106 200 106 Q 294 106 294 166 L 294 294 L 266 294 L 266 166 Q 266 134 200 134 Q 134 134 134 194 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter i -->
          <g *ngIf="currentLetter === 'i'" id="letteriPaths">
            <g id="grayLetteriPaths">
              <path d="M 186 106 L 214 106 L 214 294 L 186 294 Z" fill="#E5E7EB"/>
              <circle cx="200" cy="60" r="14" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letteriClip)">
              <path d="M 186 106 L 214 106 L 214 294 L 186 294 Z" fill="#D946A6"/>
              <circle cx="200" cy="60" r="14" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter j -->
          <g *ngIf="currentLetter === 'j'" id="letterjPaths">
            <g id="grayLetterjPaths">
              <path d="M 206 106 L 234 106 L 234 354 Q 234 394 160 394 Q 106 394 106 354 L 134 340 Q 134 366 160 366 Q 206 366 206 340 Z" fill="#E5E7EB"/>
              <circle cx="220" cy="60" r="14" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterjClip)">
              <path d="M 206 106 L 234 106 L 234 354 Q 234 394 160 394 Q 106 394 106 354 L 134 340 Q 134 366 160 366 Q 206 366 206 340 Z" fill="#D946A6"/>
              <circle cx="220" cy="60" r="14" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter k -->
          <g *ngIf="currentLetter === 'k'" id="letterkPaths">
            <g id="grayLetterkPaths">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z" fill="#E5E7EB"/>
              <path d="M 120 180 L 250 106 L 274 130 L 154 195 L 294 280 L 270 304 L 120 220 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterkClip)">
              <path d="M 106 46 L 134 46 L 134 294 L 106 294 Z" fill="#D946A6"/>
              <path d="M 120 180 L 250 106 L 274 130 L 154 195 L 294 280 L 270 304 L 120 220 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter l -->
          <g *ngIf="currentLetter === 'l'" id="letterlPaths">
            <g id="grayLetterlPaths">
              <path d="M 186 46 L 214 46 L 214 294 L 186 294 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterlClip)">
              <path d="M 186 46 L 214 46 L 214 294 L 186 294 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter m -->
          <g *ngIf="currentLetter === 'm'" id="lettermPaths">
            <g id="grayLettermPaths">
              <path d="M 66 294 L 94 294 L 94 146 Q 94 106 140 106 Q 186 106 186 146 L 186 294 L 214 294 L 214 146 Q 214 106 260 106 Q 306 106 306 146 L 306 294 L 334 294 L 334 146 Q 334 78 260 78 Q 214 78 200 106 Q 186 78 140 78 Q 66 78 66 146 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettermClip)">
              <path d="M 66 294 L 94 294 L 94 146 Q 94 106 140 106 Q 186 106 186 146 L 186 294 L 214 294 L 214 146 Q 214 106 260 106 Q 306 106 306 146 L 306 294 L 334 294 L 334 146 Q 334 78 260 78 Q 214 78 200 106 Q 186 78 140 78 Q 66 78 66 146 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter n -->
          <g *ngIf="currentLetter === 'n'" id="letternPaths">
            <g id="grayLetternPaths">
              <path d="M 106 294 L 134 294 L 134 146 L 106 146 Z" fill="#E5E7EB"/>
              <path d="M 120 166 Q 120 106 200 106 Q 294 106 294 166 L 294 294 L 266 294 L 266 166 Q 266 134 200 134 Q 134 134 134 194 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letternClip)">
              <path d="M 106 294 L 134 294 L 134 146 L 106 146 Z" fill="#D946A6"/>
              <path d="M 120 166 Q 120 106 200 106 Q 294 106 294 166 L 294 294 L 266 294 L 266 166 Q 266 134 200 134 Q 134 134 134 194 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter o -->
          <g *ngIf="currentLetter === 'o'" id="letteroPaths">
            <g id="grayLetteroPaths">
              <path d="M 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 Q 294 106 200 106 M 200 134 Q 266 134 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Z" fill="#E5E7EB" fill-rule="evenodd"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letteroClip)">
              <path d="M 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 200 Q 294 106 200 106 M 200 134 Q 266 134 266 200 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Z" fill="#D946A6" fill-rule="evenodd"/>
            </g>
          </g>

          <!-- Lowercase letter p -->
          <g *ngIf="currentLetter === 'p'" id="letterpPaths">
            <g id="grayLetterpPaths">
              <path d="M 106 106 L 134 106 L 134 374 L 106 374 Z" fill="#E5E7EB"/>
              <path d="M 120 146 Q 120 106 200 106 Q 294 106 294 200 Q 294 294 200 294 Q 106 294 106 226 L 134 226 Q 134 266 200 266 Q 266 266 266 200 Q 266 134 200 134 Q 134 134 134 174 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterpClip)">
              <path d="M 106 106 L 134 106 L 134 374 L 106 374 Z" fill="#D946A6"/>
              <path d="M 120 146 Q 120 106 200 106 Q 294 106 294 200 Q 294 294 200 294 Q 106 294 106 226 L 134 226 Q 134 266 200 266 Q 266 266 266 200 Q 266 134 200 134 Q 134 134 134 174 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter q -->
          <g *ngIf="currentLetter === 'q'" id="letterqPaths">
            <g id="grayLetterqPaths">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 226 L 266 226 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 174 Z" fill="#E5E7EB"/>
              <path d="M 266 106 L 294 106 L 294 374 L 266 374 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterqClip)">
              <path d="M 294 146 Q 294 106 200 106 Q 106 106 106 200 Q 106 294 200 294 Q 294 294 294 226 L 266 226 Q 266 266 200 266 Q 134 266 134 200 Q 134 134 200 134 Q 266 134 266 174 Z" fill="#D946A6"/>
              <path d="M 266 106 L 294 106 L 294 374 L 266 374 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter r -->
          <g *ngIf="currentLetter === 'r'" id="letterrPaths">
            <g id="grayLetterrPaths">
              <path d="M 126 294 L 154 294 L 154 146 L 126 146 Z" fill="#E5E7EB"/>
              <path d="M 140 166 Q 140 106 220 106 Q 294 106 294 146 L 266 160 Q 266 134 220 134 Q 154 134 154 194 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterrClip)">
              <path d="M 126 294 L 154 294 L 154 146 L 126 146 Z" fill="#D946A6"/>
              <path d="M 140 166 Q 140 106 220 106 Q 294 106 294 146 L 266 160 Q 266 134 220 134 Q 154 134 154 194 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter s -->
          <g *ngIf="currentLetter === 's'" id="lettersPaths">
            <g id="grayLettersPaths">
              <path d="M 274 136 Q 254 106 200 106 Q 126 106 126 146 Q 126 186 200 186 Q 274 186 274 226 Q 274 294 200 294 Q 146 294 126 264 L 146 244 Q 166 266 200 266 Q 246 266 246 240 Q 246 214 200 200 Q 154 186 154 146 Q 154 134 200 134 Q 234 134 254 156 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettersClip)">
              <path d="M 274 136 Q 254 106 200 106 Q 126 106 126 146 Q 126 186 200 186 Q 274 186 274 226 Q 274 294 200 294 Q 146 294 126 264 L 146 244 Q 166 266 200 266 Q 246 266 246 240 Q 246 214 200 200 Q 154 186 154 146 Q 154 134 200 134 Q 234 134 254 156 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter t -->
          <g *ngIf="currentLetter === 't'" id="lettertPaths">
            <g id="grayLettertPaths">
              <path d="M 186 46 L 214 46 L 214 294 L 186 294 Z" fill="#E5E7EB"/>
              <path d="M 126 106 L 274 106 L 274 134 L 126 134 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettertClip)">
              <path d="M 186 46 L 214 46 L 214 294 L 186 294 Z" fill="#D946A6"/>
              <path d="M 126 106 L 274 106 L 274 134 L 126 134 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter u -->
          <g *ngIf="currentLetter === 'u'" id="letteruPaths">
            <g id="grayLetteruPaths">
              <path d="M 106 106 L 134 106 L 134 206 Q 134 294 200 294 Q 266 294 266 206 L 266 106 L 294 106 L 294 206 Q 294 322 200 322 Q 106 322 106 206 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letteruClip)">
              <path d="M 106 106 L 134 106 L 134 206 Q 134 294 200 294 Q 266 294 266 206 L 266 106 L 294 106 L 294 206 Q 294 322 200 322 Q 106 322 106 206 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter v -->
          <g *ngIf="currentLetter === 'v'" id="lettervPaths">
            <g id="grayLettervPaths">
              <path d="M 86 106 L 200 294 L 314 106 L 286 106 L 200 258 L 114 106 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#lettervClip)">
              <path d="M 86 106 L 200 294 L 314 106 L 286 106 L 200 258 L 114 106 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter w -->
          <g *ngIf="currentLetter === 'w'" id="letterwPaths">
            <g id="grayLetterwPaths">
              <path d="M 66 106 L 140 294 L 200 166 L 260 294 L 334 106 L 306 106 L 252 252 L 200 136 L 148 252 L 94 106 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterwClip)">
              <path d="M 66 106 L 140 294 L 200 166 L 260 294 L 334 106 L 306 106 L 252 252 L 200 136 L 148 252 L 94 106 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter x -->
          <g *ngIf="currentLetter === 'x'" id="letterxPaths">
            <g id="grayLetterxPaths">
              <path d="M 106 106 L 200 200 L 294 106 L 320 130 L 220 214 L 320 298 L 294 322 L 200 228 L 106 322 L 80 298 L 180 214 L 80 130 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterxClip)">
              <path d="M 106 106 L 200 200 L 294 106 L 320 130 L 220 214 L 320 298 L 294 322 L 200 228 L 106 322 L 80 298 L 180 214 L 80 130 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter y -->
          <g *ngIf="currentLetter === 'y'" id="letteryPaths">
            <g id="grayLetteryPaths">
              <path d="M 106 106 L 200 206 L 294 106 L 320 130 L 214 248 L 154 374 L 126 360 L 180 248 L 80 130 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letteryClip)">
              <path d="M 106 106 L 200 206 L 294 106 L 320 130 L 214 248 L 154 374 L 126 360 L 180 248 L 80 130 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Lowercase letter z -->
          <g *ngIf="currentLetter === 'z'" id="letterzPaths">
            <g id="grayLetterzPaths">
              <path d="M 106 106 L 294 106 L 294 134 L 154 266 L 294 266 L 294 294 L 106 294 L 106 266 L 246 134 L 106 134 Z" fill="#E5E7EB"/>
            </g>
            <g mask="url(#traceMask)" clip-path="url(#letterzClip)">
              <path d="M 106 106 L 294 106 L 294 134 L 154 266 L 294 266 L 294 294 L 106 294 L 106 266 L 246 134 L 106 134 Z" fill="#D946A6"/>
            </g>
          </g>

          <!-- Fallback for other characters -->
          <g *ngIf="!'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'.includes(currentLetter)" id="letterText">
            <text
              id="grayLetter"
              x="200"
              y="280"
              font-size="300"
              font-family="Arial Black, Arial, sans-serif"
              font-weight="900"
              text-anchor="middle"
              fill="#E5E7EB"
              stroke="#D1D5DB"
              stroke-width="4">
              {{currentLetter}}
            </text>

            <g mask="url(#traceMask)">
              <text
                x="200"
                y="280"
                font-size="300"
                font-family="Arial Black, Arial, sans-serif"
                font-weight="900"
                text-anchor="middle"
                fill="#D946A6">
                {{currentLetter}}
              </text>
            </g>
          </g>

          <!-- Guide path for current stroke (hidden by default, shown on hint) -->
          <path
            *ngIf="!isFreeWriting"
            id="guidePath"
            stroke="#9CA3AF"
            stroke-width="3"
            fill="none"
            stroke-linecap="round"
            opacity="0"/>

          <!-- Start/End point indicators -->
          <g *ngIf="!isFreeWriting" id="arrowsGroup"></g>

          <!-- Letter-specific decoration (dynamically set) -->
          <text x="310" y="100" font-size="60" id="letterDecor">üçé</text>

          <!-- Sliding cursor/character that follows tracing -->
          <g *ngIf="showCursor" [attr.transform]="'translate(' + cursorX + ',' + cursorY + ')'" style="transition: transform 0.05s ease-out;">
            <!-- Glowing pulse behind character -->
            <circle cx="0" cy="0" r="28" fill="#FCD34D" opacity="0.3">
              <animate attributeName="r" values="28;35;28" dur="1.2s" repeatCount="indefinite"/>
              <animate attributeName="opacity" values="0.3;0.1;0.3" dur="1.2s" repeatCount="indefinite"/>
            </circle>
            <!-- Main character circle -->
            <circle cx="0" cy="0" r="20" fill="url(#cursorGradient)" stroke="#F59E0B" stroke-width="5" filter="drop-shadow(0 6px 12px rgba(0,0,0,0.4))"/>
            <!-- Character emoji -->
            <text x="0" y="8" font-size="26" text-anchor="middle">‚úèÔ∏è</text>
          </g>

          </g><!-- End clipping group -->
        </svg>

        <!-- Drawing canvas for tracing mode (visible strokes) -->
        <canvas
          *ngIf="!isFreeWriting"
          #drawingCanvas
          class="absolute top-0 left-0 w-full h-full"
          style="touch-action: none; pointer-events: auto; background: transparent;">
        </canvas>
      </div>

      <!-- Pen Options (Writing Mode Only) - Colorful Design -->
      <div *ngIf="isFreeWriting" class="mt-3 bg-gradient-to-r from-purple-100 via-pink-100 to-blue-100 rounded-2xl p-3 md:p-4 border-3 border-purple-300 shadow-lg">
        <div class="flex flex-wrap items-center justify-center gap-3 md:gap-5">
          <!-- Color Selection -->
          <div class="flex items-center gap-2 md:gap-3 bg-white/80 rounded-full px-3 py-2 shadow-md">
            <span class="text-lg md:text-xl animate-wiggle">üé®</span>
            <div class="flex gap-1.5">
              <button
                *ngFor="let c of availableColors; let i = index"
                (click)="selectColor(c.color)"
                class="w-7 h-7 md:w-9 md:h-9 rounded-full border-3 transition-all hover:scale-125 hover:rotate-12"
                [style.backgroundColor]="c.color"
                [style.animation-delay]="(i * 0.05) + 's'"
                [class.border-yellow-400]="penColor === c.color"
                [class.border-white]="penColor !== c.color"
                [class.ring-2]="penColor === c.color"
                [class.ring-yellow-400]="penColor === c.color"
                [class.shadow-xl]="penColor === c.color"
                [class.scale-110]="penColor === c.color">
              </button>
            </div>
          </div>

          <!-- Width Selection -->
          <div class="flex items-center gap-2 md:gap-3 bg-white/80 rounded-full px-3 py-2 shadow-md">
            <span class="text-lg md:text-xl animate-wiggle" style="animation-delay: 0.2s;">üìè</span>
            <div class="flex gap-1.5">
              <button
                *ngFor="let w of availableWidths; let i = index"
                (click)="selectWidth(w)"
                class="w-8 h-8 md:w-10 md:h-10 rounded-full bg-white border-3 flex items-center justify-center transition-all hover:scale-125"
                [class.border-yellow-500]="penWidth === w"
                [class.border-gray-300]="penWidth !== w"
                [class.bg-yellow-100]="penWidth === w"
                [class.shadow-xl]="penWidth === w">
                <div
                  class="rounded-full transition-all"
                  [style.backgroundColor]="penColor"
                  [style.width.px]="w / 2"
                  [style.height.px]="w / 2">
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Instructions & Action Buttons - Inside White Card -->
      <div class="mt-3 space-y-3">
        <!-- Instructions Banner -->
        <div class="text-center">
          <div class="inline-flex items-center gap-2 bg-gradient-to-r from-yellow-100 to-orange-100 rounded-full px-4 py-2 shadow-md border-2 border-yellow-300">
            <span class="text-2xl animate-wiggle">‚úèÔ∏è</span>
            <p class="text-base md:text-lg font-bold text-gray-700">
              <ng-container *ngIf="isFreeWriting">Write on your own!</ng-container>
              <ng-container *ngIf="!isFreeWriting">Trace from <span class="text-yellow-500">üü°</span> to <span class="text-green-500">üü¢</span></ng-container>
            </p>
            <span class="text-2xl animate-wiggle" style="animation-delay: 0.3s;">üñçÔ∏è</span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-center gap-4">
          <button
            (click)="clearDrawing()"
            class="bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full px-5 py-2 md:px-6 md:py-2.5 shadow-xl border-3 border-yellow-600 hover:scale-110 active:scale-95 transition-all">
            <span class="text-base md:text-lg text-white font-bold flex items-center gap-1">
              <span class="animate-spin-slow">üîÑ</span> Clear
            </span>
          </button>

          <button
            *ngIf="!isFreeWriting"
            (click)="showHint()"
            class="bg-gradient-to-br from-blue-400 to-purple-500 rounded-full px-5 py-2 md:px-6 md:py-2.5 shadow-xl border-3 border-blue-600 hover:scale-110 active:scale-95 transition-all">
            <span class="text-base md:text-lg text-white font-bold flex items-center gap-1">
              <span class="animate-glow">üí°</span> Hint
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
